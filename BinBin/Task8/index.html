<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>IFE JavaScript Task 08</title>
  <style>
    .box {
      background: white;
      display: flex;
      border: black solid 1px;
      margin: 4px;
      flex: 1;
    }

    .select {
      background: green;
    }
  </style>
</head>

<body>
  <div style="height: 100px;" class="box root">
    <div class="box">Super
      <div class="box">Car
        <div class="box">Apple
          <div class="box">Pear</div>
          <div class="box">Pig</div>
          <div class="box">Cola</div>
          <div class="box">Soccer</div>
        </div>
        <div class="box">Phone</div>
        <div class="box">
          <div class="box">Book</div>
          <div class="box">School</div>
        </div>
      </div>
      <div class="box">Note
        <div class="box">Human
          <div class="box">Code</div>
          <div class="box">Operate</div>
          <div class="box">Man</div>
        </div>
        <div class="box">Program
          <div class="box">Dement
            <div class="box">Cat</div>
          </div>
          <div class="box">Glass</div>
        </div>
        <div class="box">Fish</div>
      </div>
    </div>
  </div>
  <button type="button" id="TraversalBtn">Traversal</button>
  <script>
    let previous = null,
      animationOrder = [],
      buttonList = []

    function traversal(element) {
      if (element != null) {
        element.childNodes.forEach((e) => {
          if (e.nodeType == 1) traversal(e)
        }, this)
        animationOrder.push(element)
      }
    }

    function play() {
      let top = animationOrder.pop()
      if (previous) previous.classList.toggle('select')
      if (top == null) return
      top.classList.toggle('select')
      previous = top

      setTimeout(() => play(), 1000)
    }

    document.getElementById('TraversalBtn').addEventListener('click', () => {
      traversal(document.getElementsByClassName('root')[0])
      console.log(animationOrder)
      play()
    })
  </script>
</body>

</html>
